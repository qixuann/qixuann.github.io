(function(){"use strict";var e={9165:function(e,t,a){var n=a(9242),r=a(3396);function o(e,t){const a=(0,r.up)("router-link"),n=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("nav",null,[(0,r.Wm)(a,{to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("Guest Check-in")])),_:1}),(0,r.Uk)(" | "),(0,r.Wm)(a,{to:"/parking-redemption"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ticket Redemption")])),_:1})]),(0,r.Wm)(n)],64)}var s=a(89);const u={},l=(0,s.Z)(u,[["render",o]]);var c=l,i=a(2483),d=a(7139);const p=(0,r._)("h1",null,"Guest Check-In Status",-1),m={class:"table-toolbar"},f={class:"table-container"};function h(e,t,a,n,o,s){const u=(0,r.up)("el-button"),l=(0,r.up)("el-table-column"),c=(0,r.up)("el-tag"),i=(0,r.up)("el-table");return(0,r.wg)(),(0,r.iD)("div",null,[p,(0,r._)("div",m,[(0,r.Wm)(u,{onClick:n.fetchGuestsData,type:"primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Refresh")])),_:1},8,["onClick"])]),(0,r._)("div",f,[(0,r.Wm)(i,{data:n.guestList,height:"500",style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{prop:"companyName",label:"Company Name"}),(0,r.Wm)(l,{prop:"tableNo",label:"Table Number"}),(0,r.Wm)(l,{prop:"checkin",label:"Check-in Status"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(c,{type:"Yes"===e.checkin?"success":"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(e.checkin),1)])),_:2},1032,["type"])])),_:1}),(0,r.Wm)(l,{prop:"update_time",label:"Updated At"})])),_:1},8,["data"])])])}var w=a(4870),g=a(5059),b=a(1902),k=a(6807),y={components:{ElTable:g.eI,ElTableColumn:g.$Y,ElTag:b.Ks,ElButton:k.mi},setup(){const e=(0,w.iH)([]),t=async()=>{try{const t=await fetch("https://8.217.178.249/guest_list");if(!t.ok)throw new Error("Failed to fetch data");const a=await t.json();e.value=a}catch(t){console.error("Error fetching guest data:",t)}},a=()=>{t()},n=setInterval(t,3e5);return(0,r.bv)((()=>(t(),()=>clearInterval(n)))),{guestList:e,fetchGuestsData:t,refreshData:a}}};const v=(0,s.Z)(y,[["render",h]]);var _=v;const W=(0,r._)("h1",null,"Parking Tickets Redemption",-1),C={class:"table-toolbar"},E={key:1},N=(0,r._)("span",{style:{color:"grey","font-style":"italic"}},"No redemption needed",-1),T=[N],Y=(0,r._)("h2",{style:{"padding-top":"50px"}},"Redeemed Guests",-1),D={key:3},U=(0,r._)("span",{style:{color:"grey","font-style":"italic"}},"No redeemed guests found.",-1),G=[U];function O(e,t,a,n,o,s){const u=(0,r.up)("el-button"),l=(0,r.up)("el-table-column"),c=(0,r.up)("el-tag"),i=(0,r.up)("el-checkbox"),p=(0,r.up)("el-table");return(0,r.wg)(),(0,r.iD)("div",null,[W,(0,r._)("div",C,[(0,r.Wm)(u,{onClick:n.fetchGuestsData,type:"primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Refresh")])),_:1},8,["onClick"])]),n.guests.length>0?((0,r.wg)(),(0,r.j4)(p,{key:0,data:n.guests,style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"Company Name",prop:"companyName"}),(0,r.Wm)(l,{label:"Guest Name",prop:"guestName"}),(0,r.Wm)(l,{label:"Table Number",prop:"tableNo"}),(0,r.Wm)(l,{label:"Check-in Status",prop:"checkin"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(c,{type:"Yes"===e.checkin?"success":"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(e.checkin),1)])),_:2},1032,["type"])])),_:1}),(0,r.Wm)(l,{label:"Driving",prop:"driving"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(c,{type:"Yes"===e.checkin?"success":"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(e.checkin),1)])),_:2},1032,["type"])])),_:1}),(0,r.Wm)(l,{label:"Redeem Status"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(i,{modelValue:e.redeem,"onUpdate:modelValue":t=>e.redeem=t,onChange:t=>n.updateRedeemStatus(e.guestID,e.redeem)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),(0,r.Wm)(l,{label:"Updated At",prop:"update_time"})])),_:1},8,["data"])):((0,r.wg)(),(0,r.iD)("div",E,T)),Y,n.redeemedGuests.length>0?((0,r.wg)(),(0,r.j4)(p,{key:2,data:n.redeemedGuests,style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{label:"Company Name",prop:"companyName"}),(0,r.Wm)(l,{label:"Guest Name",prop:"guestName"}),(0,r.Wm)(l,{label:"Table Number",prop:"tableNo"}),(0,r.Wm)(l,{label:"Check-in Status",prop:"checkin"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(c,{type:"Yes"===e.checkin?"success":"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(e.checkin),1)])),_:2},1032,["type"])])),_:1}),(0,r.Wm)(l,{label:"Driving",prop:"driving"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(c,{type:"Yes"===e.checkin?"success":"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(e.checkin),1)])),_:2},1032,["type"])])),_:1}),(0,r.Wm)(l,{label:"Redeem Status",prop:"redeem"},{default:(0,r.w5)((({row:e})=>[(0,r.Wm)(c,{type:"Yes"===e.checkin?"success":"danger"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(e.checkin),1)])),_:2},1032,["type"])])),_:1}),(0,r.Wm)(l,{label:"Updated At",prop:"update_time"})])),_:1},8,["data"])):((0,r.wg)(),(0,r.iD)("div",D,G))])}var j=a(5831),x=a(875),R={components:{ElTable:g.eI,ElTableColumn:g.$Y,ElCheckbox:j.ElCheckbox,ElButton:k.mi,ElTag:b.Ks},setup(){const e=(0,w.iH)([]),t=(0,w.iH)([]),a=async()=>{try{const a=await fetch("https://8.217.178.249/ticket_redeem");if(!a.ok)throw new Error("Failed to fetch data for guests");const n=await a.json();n.sort(((e,t)=>"Yes"===e.redeem&&"Yes"!==t.redeem?1:"Yes"!==e.redeem&&"Yes"===t.redeem?-1:new Date(t.update_time)-new Date(e.update_time))),n.forEach((e=>{"Yes"===e.driving&&"Yes"===e.redeem?e.redeem=!0:e.redeem=!1})),e.value=n;const r=await fetch("https://8.217.178.249/redeemed_guests");if(!r.ok)throw new Error("Failed to fetch data for redeemed guests");const o=await r.json();t.value=o}catch(a){console.error("Error fetching guest data:",a)}},n=async(t,n)=>{let r="";r=n?"Are you sure you want to redeem the ticket?":"Are you sure you want to undo the redemption of the guest?",x.T.confirm(r,"Confirm Action",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{try{const e=await fetch(`https://8.217.178.249/update_redeem_status/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({redeem:n?"Yes":"No"})});if(!e.ok)throw new Error("Failed to update redeem status");a()}catch(e){console.error("Error updating redeem status:",e)}})).catch((()=>{e.value.forEach((e=>{e.guestID===t&&(e.redeem=!n)}))}))},o=e=>{"Yes"===e.driving&&"No"===e.redeem?e.redeem=!1:"Yes"===e.redeem&&(e.redeem=!0)};return(0,r.bv)((async()=>{await a(),e.value.forEach((e=>o(e)))})),{guests:e,redeemedGuests:t,fetchGuestsData:a,updateRedeemStatus:n}}};const S=(0,s.Z)(R,[["render",O]]);var I=S;const A=[{path:"/",name:"GuestCheckInStatus",component:_},{path:"/parking-redemption",name:"ParkingRedemption",component:I}],z=(0,i.p7)({history:(0,i.PO)(),routes:A});var P=z,F=a(65),H=(0,F.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});a(2834);(0,n.ri)(c).use(H).use(P).mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,o){if(!n){var s=1/0;for(i=0;i<e.length;i++){n=e[i][0],r=e[i][1],o=e[i][2];for(var u=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(u=!1,o<s&&(s=o));if(u){e.splice(i--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[n,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,s=n[0],u=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(r in u)a.o(u,r)&&(a.m[r]=u[r]);if(l)var i=l(a)}for(t&&t(n);c<s.length;c++)o=s[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(i)},n=self["webpackChunkevent_portal"]=self["webpackChunkevent_portal"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(9165)}));n=a.O(n)})();
//# sourceMappingURL=app.2d8cebb0.js.map